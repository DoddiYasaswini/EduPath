<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduPath Pro | Advanced Career Roadmap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #f8fafc; color: #1e293b; }
        .glass-card { background: white; border-radius: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .hidden { display: none; }
        .option-btn { border: 2px solid #e2e8f0; transition: 0.3s; cursor: pointer; border-radius: 1rem; padding: 1rem; }
        .selected-option { border-color: #4f46e5; background: #eef2ff; font-weight: 600; }
        .step-line { border-left: 3px dashed #cbd5e1; margin-left: 1.25rem; padding-left: 2rem; position: relative; }
        .step-dot { position: absolute; left: -0.65rem; top: 0; width: 1.25rem; height: 1.25rem; background: #4f46e5; border-radius: 50%; border: 3px solid white; }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">

    <div id="app" class="max-w-4xl mx-auto">
        <div id="auth-section" class="glass-card p-10 text-center shadow-xl">
            <h1 class="text-3xl font-bold text-indigo-600 mb-4">EduPath AI Roadmap ðŸš€</h1>
            <button onclick="loginWithGoogle()" class="flex items-center gap-3 mx-auto border px-8 py-3 rounded-xl hover:bg-gray-50 font-medium">
                <img src="https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png" class="w-6"> Login with Google
            </button>
        </div>

        <div id="quiz-section" class="hidden glass-card overflow-hidden">
            <div class="bg-indigo-600 p-6 text-white flex justify-between items-center">
                <h2 class="font-bold">Tell us about yourself</h2>
                <button onclick="logout()" class="text-xs bg-indigo-500 px-3 py-1 rounded-lg">Logout</button>
            </div>
            <div class="p-8">
                <div id="question-container">
                    <h3 id="question-text" class="text-xl font-bold mb-6"></h3>
                    <div id="options-container" class="grid gap-3"></div>
                </div>
                <div class="mt-8 flex justify-end">
                    <button id="nextBtn" onclick="nextQuestion()" class="hidden bg-indigo-600 text-white px-8 py-2 rounded-xl font-bold">Next</button>
                </div>
            </div>
        </div>

        <div id="result-section" class="hidden space-y-8">
            <div class="glass-card p-8">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                    <h2 id="spec-name" class="text-3xl font-bold text-indigo-600"></h2>
                    <button onclick="downloadRoadmap()" class="bg-green-600 text-white px-6 py-2 rounded-lg font-bold shadow-md hover:bg-green-700 transition">Download Roadmap PDF</button>
                </div>

                <div class="mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-200">
                    <h3 class="font-bold text-slate-700 mb-3">Target Skills to Learn:</h3>
                    <div id="skills-tags" class="flex flex-wrap gap-2"></div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 text-center" id="stats-grid"></div>

                <div class="p-4 bg-indigo-50 rounded-xl mb-8">
                    <p class="text-xs font-bold text-indigo-800 uppercase">Top Recruiters</p>
                    <p id="top-companies" class="text-indigo-600 font-medium"></p>
                </div>

                <div id="pdf-content">
                    <h3 class="text-2xl font-bold mb-8 border-b pb-2">Mastery Roadmap (6 Levels)</h3>
                    <div id="levels-list" class="space-y-4"></div>

                    <h3 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">Hand-on Projects</h3>
                    <div id="projects-list" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10"></div>

                    <h3 class="text-2xl font-bold mb-6 border-b pb-2">Must-Read Reference Books</h3>
                    <div id="books-list" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10"></div>

                    <h3 class="text-2xl font-bold mb-6 border-b pb-2">Learning Resources & Channels</h3>
                    <div id="channels-list" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
                </div>
                
                <button onclick="location.reload()" class="mt-12 text-gray-400 font-bold block mx-auto underline">â†º Start Over</button>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD6BIJg8RlqFF7tRfVhK7mC5S2tielyvXw",
            authDomain: "edupath-5a9f8.firebaseapp.com",
            projectId: "edupath-5a9f8",
            storageBucket: "edupath-5a9f8.firebasestorage.app",
            messagingSenderId: "203481102798",
            appId: "1:203481102798:web:952f93771195ff16afd39f"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        const quizData = [
            { q: "Current Engineering Branch?", key: "branch", options: ["CSE/IT", "ECE/EEE", "Mechanical", "Civil"] },
            { q: "What interests you the most?", key: "interest", options: ["Software Development", "Data Science & AI", "Cyber Security", "VLSI / Circuits", "AutoCAD / Mechanical Design", "Ethical Hacking"] }
        ];

        const knowledgeBase = {
            "Software Development": {
                skills: ["JavaScript", "Python", "Data Structures", "System Design", "Cloud Computing", "Database Management"],
                stats: { high: "65 LPA", avg: "12 LPA", least: "4 LPA", companies: "Google, Amazon, Microsoft, TCS, Infosys" },
                levels: [
                    { t: "Level 1: Programming Foundations", d: "Logic building, C++/Java/Python syntax.", time: "4 Weeks" },
                    { t: "Level 2: Data Structures & Algos", d: "Arrays, Linked Lists, Trees, Graphs, Sorting.", time: "8 Weeks" },
                    { t: "Level 3: Web/App Tech Stack", d: "HTML/CSS, React.js, Node.js or Flutter.", time: "6 Weeks" },
                    { t: "Level 4: Database & APIs", d: "SQL/NoSQL, REST APIs, JSON integration.", time: "4 Weeks" },
                    { t: "Level 5: System Design & Scaling", d: "Architecture patterns, Load balancing, Caching.", time: "5 Weeks" },
                    { t: "Level 6: DevOps & Cloud", d: "Docker, Kubernetes, AWS/Azure/GCP.", time: "4 Weeks" }
                ],
                projects: ["Personal Portfolio Website", "Real-time Chat Application", "E-commerce Platform", "Weather API Dashboard"],
                books: ["Clean Code by Robert Martin", "Design Patterns by Gang of Four"],
                channels: ["CodeWithHarry", "FreeCodeCamp", "Traversy Media"]
            },
            "Data Science & AI": {
                skills: ["Statistics", "Python", "Pandas/NumPy", "Deep Learning", "SQL", "Tableau"],
                stats: { high: "55 LPA", avg: "15 LPA", least: "6 LPA", companies: "Meta, Nvidia, Adobe, Mu Sigma" },
                levels: [
                    { t: "Level 1: Math & Statistics", d: "Probability, Linear Algebra, Calculus.", time: "4 Weeks" },
                    { t: "Level 2: Data Handling (Python)", d: "Pandas, NumPy, Data Cleaning.", time: "4 Weeks" },
                    { t: "Level 3: Exploratory Data Analysis", d: "Matplotlib, Seaborn, Visualization.", time: "3 Weeks" },
                    { t: "Level 4: Machine Learning", d: "Regression, Decision Trees, Scikit-learn.", time: "8 Weeks" },
                    { t: "Level 5: Deep Learning & NLP", d: "Neural Networks, Transformers, HuggingFace.", time: "8 Weeks" },
                    { t: "Level 6: Big Data & AI Deployment", d: "Spark, Hadoop, Streamlit deployment.", time: "4 Weeks" }
                ],
                projects: ["Stock Price Predictor", "Spam Mail Classifier", "Image Recognition App", "Movie Recommender System"],
                books: ["Hands-On ML with Scikit-Learn", "Deep Learning with Python"],
                channels: ["Krish Naik", "Ken Jee", "Sentdex"]
            },
            "Ethical Hacking": {
                skills: ["Networking", "Linux", "Penetration Testing", "Metasploit", "Cryptography", "BASH Scripting"],
                stats: { high: "42 LPA", avg: "10 LPA", least: "4.5 LPA", companies: "Cisco, EY, Palo Alto, CrowdStrike" },
                levels: [
                    { t: "Level 1: Networking Basics", d: "TCP/IP, DNS, OSI Model, Subnetting.", time: "4 Weeks" },
                    { t: "Level 2: Linux Mastery", d: "BASH, Command Line, Permissions.", time: "3 Weeks" },
                    { t: "Level 3: Information Gathering", d: "Reconnaissance, Nmap, Google Dorking.", time: "3 Weeks" },
                    { t: "Level 4: Vulnerability Assessment", d: "SQL Injection, XSS, OWASP Top 10.", time: "6 Weeks" },
                    { t: "Level 5: Exploitation & Payloads", d: "Metasploit, Reverse Shells, Burp Suite.", time: "6 Weeks" },
                    { t: "Level 6: Security Reporting", d: "VDP participation, Professional report writing.", time: "3 Weeks" }
                ],
                projects: ["Keylogger Tool", "Vulnerability Scanner", "Packet Sniffer", "Brute Force Protection Script"],
                books: ["The Web Application Hacker's Handbook", "Metasploit: The Penetration Tester's Guide"],
                channels: ["The Cyber Mentor", "NetworkChuck", "John Hammond"]
            }
            // Other branches can be added following this pattern...
        };

        let currentQ = 0, answers = {};

        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('auth-section').classList.add('hidden');
                document.getElementById('quiz-section').classList.remove('hidden');
                showQuestion();
            } else {
                document.getElementById('auth-section').classList.remove('hidden');
                document.getElementById('quiz-section').classList.add('hidden');
            }
        });

        function loginWithGoogle() { auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()); }
        function logout() { auth.signOut(); }

        function showQuestion() {
            const data = quizData[currentQ];
            document.getElementById('question-text').innerText = data.q;
            const container = document.getElementById('options-container');
            container.innerHTML = "";
            data.options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => selectOption(data.key, opt);
                container.appendChild(btn);
            });
        }

        function selectOption(key, val) {
            answers[key] = val;
            document.querySelectorAll('.option-btn').forEach(b => b.classList.toggle('selected-option', b.innerText === val));
            document.getElementById('nextBtn').classList.remove('hidden');
        }

        function nextQuestion() {
            if (currentQ < quizData.length - 1) { currentQ++; document.getElementById('nextBtn').classList.add('hidden'); showQuestion(); } 
            else finishQuiz();
        }

        async function finishQuiz() {
            const user = auth.currentUser;
            const info = knowledgeBase[answers.interest] || knowledgeBase["Software Development"];
            
            await db.collection("users").doc(user.uid).set({ profile: answers, timestamp: firebase.firestore.FieldValue.serverTimestamp() }, { merge: true });

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('result-section').classList.remove('hidden');

            document.getElementById('spec-name').innerText = info.name;
            document.getElementById('skills-tags').innerHTML = info.skills.map(s => `<span class="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-medium"># ${s}</span>`).join('');
            
            document.getElementById('stats-grid').innerHTML = `
                <div class="p-6 bg-green-50 rounded-2xl"><p class="text-xs font-bold text-green-600">HIGHEST</p><h3 class="text-2xl font-black">${info.stats.high}</h3></div>
                <div class="p-6 bg-blue-50 rounded-2xl"><p class="text-xs font-bold text-blue-600">AVERAGE</p><h3 class="text-2xl font-black">${info.stats.avg}</h3></div>
                <div class="p-6 bg-red-50 rounded-2xl"><p class="text-xs font-bold text-red-600">LOWEST</p><h3 class="text-2xl font-black">${info.stats.least}</h3></div>
            `;
            document.getElementById('top-companies').innerText = info.stats.companies;

            // Levels (Timeline included)
            document.getElementById('levels-list').innerHTML = info.levels.map(l => `
                <div class="step-line">
                    <div class="step-dot"></div>
                    <p class="text-indigo-600 font-bold text-xs uppercase tracking-widest">${l.time} Estimated</p>
                    <h4 class="text-lg font-bold text-slate-800">${l.t}</h4>
                    <p class="text-sm text-slate-500">${l.d}</p>
                </div>
            `).join('');

            document.getElementById('projects-list').innerHTML = info.projects.map(p => `<div class="p-4 bg-slate-50 border rounded-xl font-medium text-slate-700">ðŸš€ ${p}</div>`).join('');
            document.getElementById('books-list').innerHTML = info.books.map(b => `<div class="p-4 bg-white border border-slate-100 rounded-xl shadow-sm italic text-slate-600">ðŸ“– ${b}</div>`).join('');
            document.getElementById('channels-list').innerHTML = info.channels.map(c => `<div class="p-3 bg-red-50 text-red-700 rounded-lg text-center font-bold text-sm">ðŸ“º ${c}</div>`).join('');
        }

        async function downloadRoadmap() {
            const { jsPDF } = window.jspdf;
            const element = document.getElementById('pdf-content');
            const canvas = await html2canvas(element, { scale: 2 });
            const pdf = new jsPDF('p', 'mm', 'a4');
            pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 10, 10, 190, (canvas.height * 190) / canvas.width);
            pdf.save(`${auth.currentUser.displayName}_Roadmap.pdf`);
        }
    </script>
</body>
</html>